var App=function(){"use strict";const e="https://css-tricks.com/examples/nth-child-tester/",t=e=>(e=>e.slice(0,1).toUpperCase()+e.slice(1))(e)+".",r=e=>(t,r)=>"html"===e?`<a href="${r}" rel="noopener noreferrer" target="_blank">${t}</a>`:"markdown"===e?`[${t}](${r})`:t,n=e=>t=>{const r="html"===e?"<br>":"markdown"===e?"  \n":"\n";return t.replace(/([^yf]) within/g,(...e)=>`${e[1]}${r}… within`).replace(/([^y]) after/g,(...e)=>`${e[1]}${r}… after`).replace(/([^f]) directly/g,(...e)=>`${e[1]}${r}… directly`).replace(/element of/g,`element${r}… of`).replace(/itself/g,r+"… itself")};var a=(a={})=>s=>{switch(a.format){case"html":return((a,s)=>{let i=t(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/‘([^’]+)’/g,(...e)=>`<code>${e[1]}</code>`);if(s.lineBreaks&&(i=n(s.format)(i)),s.links){const t=r(s.format);i=i.replace(/nth child/g,t("nth child",e)).replace(/nth of its type/g,t("nth of its type",e))}return i})(s,a);case"markdown":return((a,s)=>{let i=t(a).replace(/[‘’]/g,"`").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(s.lineBreaks&&(i=n(s.format)(i)),s.links){const t=r(s.format);i=i.replace(/nth child/g,t("nth child",e)).replace(/nth of its type/g,t("nth of its type",e))}return i})(s,a);case"raw":default:return t(s)}};const s={active:"active",blank:"blank",checked:"checked",disabled:"disabled",empty:"empty",enabled:"enabled","first-child":"the first child of its parent","first-of-type":"the first of its type in its parent",focus:"focused",hover:"hovered",indeterminate:"indeterminate","in-range":"in-range",invalid:"invalid",lang:e=>e.data?`in ‘${e.data}’`:null,"last-child":"the last child of its parent","last-of-type":"the last of its type in its parent","nth-child":"the nth child (formula) of its parent","nth-of-type":"the nth of its type (formula) in its parent","nth-last-child":"the nth from the end child (formula) of its parent","nth-last-of-type":"the nth of its type from the end (formula) in its parent","only-child":"the only child of its parent","only-of-type":"the only of its type in its parent",optional:"optional","out-of-range":"out-of-range","read-only":"read-only","read-write":"read-write",required:"required",target:"targeted",valid:"valid",visited:"visited"},i={after:"‘after’ pseudo-element",backdrop:"backdrop",before:"‘before’ pseudo-element","first-letter":"first letter","first-line":"first line",marker:"marker",placeholder:"placeholder",selection:"highlighted selection"},o=["html","body","head"],l=["descendant","child","sibling","adjacent"],c={attrs:[],classes:[],id:null,pseudoClasses:[],pseudoElements:[],relationship:null,tagName:null},u=e=>e.reduce((t,r,n)=>0===n?t+r:n===e.length-1?t+" and "+r:t+", "+r,""),h=e=>`‘${e}’`,f=(e,t,r)=>0===r?e+"with "+t:e+" and "+t,p=e=>JSON.parse(JSON.stringify(e));var d=e=>e.reduce((e,t)=>{const{type:r,name:n,value:a}=t,s=e[0];if(l.includes(r))return e.unshift({...p(c),relationship:r}),e;switch(r){case"universal":s.tagName="*";break;case"tag":s.tagName=n;break;case"attribute":"id"===n?s.id=a:"class"===n?s.classes.push(a):s.attrs.push(t);break;case"pseudo":Object.keys(i).includes(t.name)?s.pseudoElements.push(t):s.pseudoClasses.push(t);break;case"pseudo-element":s.pseudoElements.push(t)}return e},[p(c)]);const m=({name:e})=>Object.keys(s).includes(e),y=({classes:e=[]})=>0===e.length?"":1===e.length?"class "+h(e[0]):"classes "+u(e.map(h)),g=({id:e})=>e?"id "+h(e):"",v=({pseudoClasses:e=[]})=>{const t=e.filter(m).map(e=>{const t=s[e.name];return"function"==typeof t?t(e):t}).filter(Boolean);return t.length>0?"provided it is "+u(t):""},w=e=>{if(""===e.value)return"equals"===e.action?"whose value is empty":"";const t=e.ignoreCase?" (regardless of casing)":"",r=h(e.value)+t;switch(e.action){case"equals":return"whose value is "+r;case"any":return"whose value contains "+r;case"start":return"whose value starts with "+r;case"end":return"whose value ends with "+r;case"element":return"whose value is a space-separated list of values, one of which is "+r;case"hyphen":return"whose value is an hyphen-separated list of values, one of which is "+r}},b=({attrs:e=[]})=>u(e.map(e=>["an attribute",h(e.name),w(e)].filter(Boolean).join(" ")));var $=e=>{const{id:t,tagName:r}=e,n=[r&&"*"!==r?h(`<${r}>`):"","element"].filter(Boolean).join(" "),a=t||o.includes(r)?"the":/^[aeiouy]/.test(n.replace("‘<",""))?"an":"a";return(({pseudoElements:e=[]})=>{if(e.length){const{name:t}=e[0];return`the ${i[t]||h(t)+" pseudo-element"} of `}return""})(e)+a+" "+n},C=e=>[g(e),y(e),b(e)].filter(Boolean).reduce(f,""),k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A(e,t){return e(t={exports:{}},t.exports),t.exports}var S=A((function(e,t){var r=k&&k.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)n[a]=s[i];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.isTraversal=void 0;var n=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,a=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,s=/^\s*(?:(\*|[-\w]*)\|)?((?:\\.|[\w\u00b0-\uFFFF-])+)\s*(?:(\S?)=\s*(?:(['"])((?:[^\\]|\\[^])*?)\4|(#?(?:\\.|[\w\u00b0-\uFFFF-])*)|)|)\s*([iI])?\]/,i={undefined:"exists","":"equals","~":"element","^":"start",$:"end","*":"any","!":"not","|":"hyphen"},o={">":"child","<":"parent","~":"sibling","+":"adjacent"},l={"#":["id","equals"],".":["class","element"]},c=new Set(["has","not","matches","is","host","host-context"]),u=new Set(r(["descendant"],Object.keys(o).map((function(e){return o[e]}))));function h(e){return u.has(e.type)}t.isTraversal=h;var f=new Set(["contains","icontains"]),p=new Set(['"',"'"]);function d(e,t,r){var n=parseInt(t,16)-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)}function m(e){return e.replace(a,d)}function y(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function g(e,t){if(e.length>0&&0===t.length)throw new Error("Empty sub-selector");e.push(t)}t.default=function(e,t){var r=[],a=function e(t,r,a,u){var d,v;void 0===a&&(a={});var w=[],b=!1;function $(e){var t=r.slice(u+e).match(n);if(!t)throw new Error("Expected name, found "+r.slice(u));var a=t[0];return u+=e+a.length,m(a)}function C(e){for(;y(r.charAt(u+e));)e++;u+=e}function k(e){for(var t=0;"\\"===r.charAt(--e);)t++;return 1==(1&t)}function j(){if(w.length>0&&h(w[w.length-1]))throw new Error("Did not expect successive traversals.")}C(0);for(;""!==r;){var A=r.charAt(u);if(y(A))b=!0,C(1);else if(A in o)j(),w.push({type:o[A]}),b=!1,C(1);else if(","===A){if(0===w.length)throw new Error("Empty sub-selector");t.push(w),w=[],b=!1,C(1)}else if(b&&(j(),w.push({type:"descendant"}),b=!1),A in l){var S=l[A],_=S[0],E=S[1];w.push({type:"attribute",name:_,action:E,value:$(1),ignoreCase:!1,namespace:null})}else if("["===A){var O=r.slice(u+1).match(s);if(!O)throw new Error("Malformed attribute selector: "+r.slice(u));var P=O[0],x=O[1],F=void 0===x?null:x,L=O[2],M=O[3],q=O[5],T=void 0===q?"":q,B=O[6],R=void 0===B?T:B,U=O[7];u+=P.length+1;var N=m(L);(null!==(d=a.lowerCaseAttributeNames)&&void 0!==d?d:!a.xmlMode)&&(N=N.toLowerCase()),w.push({type:"attribute",name:N,action:i[M],value:m(R),namespace:F,ignoreCase:!!U})}else if(":"===A){if(":"===r.charAt(u+1)){w.push({type:"pseudo-element",name:$(2).toLowerCase()});continue}var H=$(1).toLowerCase(),I=null;if("("===r.charAt(u))if(c.has(H)){if(p.has(r.charAt(u+1)))throw new Error("Pseudo-selector "+H+" cannot be quoted");if(u=e(I=[],r,a,u+1),")"!==r.charAt(u))throw new Error("Missing closing parenthesis in :"+H+" ("+r+")");u+=1}else{for(var D=u+=1,Q=1;Q>0&&u<r.length;u++)"("!==r.charAt(u)||k(u)?")"!==r.charAt(u)||k(u)||Q--:Q++;if(Q)throw new Error("Parenthesis not matched");if(I=r.slice(D,u-1),f.has(H)){var J=I.charAt(0);J===I.slice(-1)&&p.has(J)&&(I=I.slice(1,-1)),I=m(I)}}w.push({type:"pseudo",name:H,data:I})}else{F=null;var z=void 0;if("*"===A)u+=1,z="*";else{if(!n.test(r.slice(u)))return w.length&&"descendant"===w[w.length-1].type&&w.pop(),g(t,w),u;z=$(0)}"|"===r.charAt(u)&&(F=z,"*"===r.charAt(u+1)?(z="*",u+=2):z=$(1)),"*"===z?w.push({type:"universal",namespace:F}):((null!==(v=a.lowerCaseTags)&&void 0!==v?v:!a.xmlMode)&&(z=z.toLowerCase()),w.push({type:"tag",name:z,namespace:F}))}}return g(t,w),u}(r,""+e,t,0);if(a<e.length)throw new Error("Unmatched selector: "+e.slice(a));return r}}));j(S);S.isTraversal;var _=A((function(e,t){var r=k&&k.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)n[a]=s[i];return n};Object.defineProperty(t,"__esModule",{value:!0});var n={equals:"",element:"~",start:"^",end:"$",any:"*",not:"!",hyphen:"|"},a=new Set(r(Object.keys(n).map((function(e){return n[e]})).filter(Boolean),[":","[","]"," ","\\","(",")"]));function s(e){return e.map(i).join(", ")}function i(e){return e.map(o).join("")}function o(e){switch(e.type){case"child":return" > ";case"parent":return" < ";case"sibling":return" ~ ";case"adjacent":return" + ";case"descendant":return" ";case"universal":return c(e.namespace)+"*";case"tag":return l(e);case"pseudo-element":return"::"+u(e.name);case"pseudo":return null===e.data?":"+u(e.name):"string"==typeof e.data?":"+u(e.name)+"("+u(e.data)+")":":"+u(e.name)+"("+s(e.data)+")";case"attribute":if("id"===e.name&&"equals"===e.action&&!e.ignoreCase&&!e.namespace)return"#"+u(e.value);if("class"===e.name&&"element"===e.action&&!e.ignoreCase&&!e.namespace)return"."+u(e.value);var t=l(e);return"exists"===e.action?"["+t+"]":"["+t+n[e.action]+"='"+u(e.value)+"'"+(e.ignoreCase?"i":"")+"]"}}function l(e){return""+c(e.namespace)+u(e.name)}function c(e){return e?("*"===e?"*":u(e))+"|":""}function u(e){return e.split("").map((function(e){return a.has(e)?"\\"+e:e})).join("")}t.default=s}));j(_);var E=A((function(e,t){var r=k&&k.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=k&&k.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.parse=void 0,n(S,t);var s=S;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a(s).default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return a(_).default}})}));j(E);E.stringify;var O=E.parse;const P=e=>e.reduce((e,t,r,n)=>{const a=e+(e=>[$(e),C(e),v(e)].filter(Boolean).join(" "))(t);return r===n.length-1?a:a+(0===r?"":" itself")+(({relationship:e})=>{switch(e){case"child":return" directly within ";case"adjacent":return" directly adjacent to ";case"sibling":return" after ";case"descendant":default:return" somewhere within "}})(t)},"");var x=A((function(e,t){var r=/(\[[^\]]+\])/g,n=/(#[^\s\.\[\]:]+)/g,a=/(\.[^\s\.:]+)/g,s=/(::[^\s\.:]+|:first-line|:first-letter|:before|:after)/g,i=/(:[^\s\.:]+)/g,o=/([^\s\.:]+)/g,l=/:not\(([^\)]*)\)/g,c=/[\*\s\+>~]+/g;e.exports=function(e){var t,u=[];if(!e)return;if("string"==typeof e)e=e.split(",");else if(!Array.isArray(e))return;if(e.forEach((function(e){var h=function(e){if("string"!=typeof e)return;function t(t){var r=e.match(t);return r?(e=e.replace(t,""),r.length):0}var u=0,h=0,f=0;return e=e.replace(l," $1 ").replace(c," "),u+=t(n),h+=t(r),h+=t(a),f+=t(s),h+=t(i),f+=t(o),[0,u,h,f]}(e);t=t||!!h,u.push(h)})),t)return u.length>1?u:u[0]}}));return{$:{form:document.querySelector("#form"),input:document.querySelector("#selector"),result:document.querySelector("#result"),specificity:document.querySelector("#specificity")},options:{format:"html",links:!0,lineBreaks:!0},results:null,init:function(){this.prefillFromURL(),this.$.form.addEventListener("submit",e=>{e.preventDefault(),this.displayResults(this.$.input.value)})},updateQueryParam:function(e){const t=new URLSearchParams(window.location.search);e?t.set("s",encodeURIComponent(e)):t.delete("s"),history.pushState(null,"","?"+t.toString())},prefillFromURL:function(){const e=new URLSearchParams(window.location.search);if(e.has("s"))try{this.$.input.value=decodeURIComponent(e.get("s")),this.displayResults(this.$.input.value)}catch(e){this.clear("")}},clear:function(){this.results=null,this.$.result.innerHTML="",this.$.specificity.innerHTML="",this.updateQueryParam("")},create:function(e,t,r={}){const n=document.createElement(e);t&&(n.innerHTML=t);for(let e in r)n.setAttribute(e,r[e]);return n},displaySpecificity:function(e,t){const r=Array.isArray(e[0])?e.map(e=>e.slice(1).join(".")).join(", "):e.slice(1).join("."),n=this.create("a","Specificity",{href:"https://polypane.app/css-specificity-calculator/#selector="+encodeURIComponent(t),target:"_blank",rel:"noopener noreferrer"});this.$.specificity.innerHTML="",this.$.specificity.appendChild(this.create("p",n.outerHTML+": "+r))},displayResults:function(e){let t=this.clear();if(e.indexOf(":not(")>-1)return this.$.result.appendChild(this.create("p","The <code>:not()</code> pseudo-class is not supported."));try{this.results=(r=e,n=this.options,O(r).map(d).map(P).map(a(n))),t=x(e)}catch(e){return this.results=null,t=null,void this.$.result.appendChild(this.create("p",e.message))}var r,n;if(this.updateQueryParam(e),this.displaySpecificity(t,e),1===this.results.length)this.$.result.appendChild(this.create("p",this.results[0]));else{const e=this.create("ol");this.results.forEach(t=>{e.appendChild(this.create("li",t))}),this.$.result.appendChild(e)}}}}();
